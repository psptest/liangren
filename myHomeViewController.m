////  myHomeViewController.m//  security2.0////  Created by Sen5 on 16/3/24.//  Copyright © 2016年 com.letianxia. All rights reserved.//#import "myHomeViewController.h"//#import "navigationView.h"#import "DVSwitch.h"#import "twiceWidthScroll.h"#import "deviceViewController.h"#import "roomsViewController.h"#import "LookingDeviceController.h"#import "prefrenceHeader.h"#import "fileOperation.h"#import "simulatorOperation.h"#import <AudioToolbox/AudioToolbox.h>#import "DeviceModel.h"typedef NS_ENUM(NSUInteger,kButtonClicked) {    kLeftButtonClicked = 100,    kMidButtonClicked,    kRightButtonClicked};@interface myHomeViewController ()<UIScrollViewDelegate>@property(nonatomic,weak) DVSwitch *swith;@property(nonatomic,weak)twiceWidthScroll *scrView;//@property(nonatomic,weak)navigationView *navView;@end@implementation myHomeViewController- (void)viewDidLoad {    [super viewDidLoad];        [self createScrollView];    [self createSubviewControllers];    }-(void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView{    //scrollView 与button联动    if (scrollView == self.scrView) {        NSInteger index = scrollView.contentOffset.x/CGRectGetWidth(scrollView.frame);        // [self.navView btnClick:(navigationButton *)[self.navView viewWithTag:100+index]];        [self.swith selectIndex:index animated:YES];    }}#pragma mark - 创建视图-(void)createNavigationView{    NSArray *titles = @[NSLocalizedString(@"Rooms", nil),NSLocalizedString(@"Devices", nil)];    UIColor *light = [[UIColor colorWithHexString:@"#ffffff"] colorWithAlphaComponent:0.4];        DVSwitch *swit = [DVSwitch switchWithStringsArray:titles hasSliderView:YES];    swit.frame = CGRectMake(10, 5, CGRectGetWidth(self.navigationController.navigationBar.frame)-20.0f, CGRectGetHeight(self.navigationController.navigationBar.frame)-15.0f);    swit.backgroundColor = light;    swit.sliderColor = [UIColor whiteColor];    swit.labelTextColorOutsideSlider = [[UIColor colorWithHexString:@"#445963"] colorWithAlphaComponent:0.7];    swit.labelTextColorInsideSlider =[UIColor colorWithHexString:@"#445963"];    swit.cornerRadius = 7;        [swit setPressedHandler:^(NSUInteger index) {                [self.scrView setContentOffset:CGPointMake(CGRectGetWidth(self.scrView.frame)*index, 0)];            }];        [swit forceSelectedIndex:self.scrView.contentOffset.x/CGRectGetWidth(self.scrView.frame) animated:NO];        _swith = swit;        [self.navigationController.navigationBar addSubview:swit];}-(void)createScrollView{    twiceWidthScroll *scroll = [twiceWidthScroll twiceWidthScrollViewWithFrame:CGRectMake(0, 0, CGRectGetWidth(self.view.frame), CGRectGetHeight(self.view.frame)-108) times:2];    [self.view addSubview:scroll];    self.scrView = scroll;    self.scrView.delegate = self;}-(void)createSubviewControllers{    NSMutableArray *devices = nil;    if ([[fileOperation sharedOperation] getDevices] != nil) {            devices = [NSMutableArray arrayWithArray:[[fileOperation sharedOperation] getDevices]];    }        if (devices) {    deviceViewController *dev = [[deviceViewController alloc]initWithDevices:devices isSetting:NO];    dev.view.frame = CGRectMake(CGRectGetWidth(self.scrView.frame), 0, CGRectGetWidth(self.scrView.frame),CGRectGetHeight(self.scrView.frame));    [self addChildViewController:dev];    [self.scrView addSubview:dev.view];    }        roomsViewController *rooms = [[roomsViewController alloc]init];    rooms.itemEachLine = 3;    rooms.view.frame = CGRectMake(0, 0, CGRectGetWidth(self.scrView.frame),CGRectGetHeight(self.scrView.frame));        [self addChildViewController:rooms];    [self.scrView addSubview:rooms.view];}#pragma mark - shake- (void)motionBegan:(UIEventSubtype)motion withEvent:(UIEvent *)event {    //震动刷新    [[P2Phandle shareP2PHandle] getDeviceStatusList];        // 播放震动    AudioServicesPlaySystemSound(kSystemSoundID_Vibrate);        return;}//life-(void)viewWillAppear:(BOOL)animated{    [self createNavigationView];   // [self.scrView setContentOffset:CGPointMake(0, 0)];}- (void)viewWillDisappear:(BOOL)animated{    [super viewDidDisappear:YES];    [_swith removeFromSuperview];    _swith = nil;}-(void)viewDidAppear:(BOOL)animated{    [super viewDidAppear:YES];}- (void)didReceiveMemoryWarning {    [super didReceiveMemoryWarning];    // Dispose of any resources that can be recreated.}@end