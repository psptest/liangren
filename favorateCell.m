////  favorateCell.m//  security2.0////  Created by Sen5 on 16/6/29.//  Copyright © 2016年 com.letianxia. All rights reserved.//#import "favorateCell.h"#import "fileOperation.h"#import "Masonry.h"#import "prefrenceHeader.h"#define kImageToTitleDistance 5#define kMinimumTitleLength 10@implementation favorateCell{    CGSize _imageSize;}-(instancetype)initWithFrame:(CGRect)frame{    self = [super initWithFrame:frame];    if (self) {                UIImageView *imgView = [[UIImageView alloc]init];        [self.contentView addSubview:imgView];        self.imgView = imgView;                        UILabel *lab = [[UILabel alloc]init];        lab.textColor = kLightTitleColor;        lab.textAlignment = NSTextAlignmentCenter;        //lab.font = [UIFont systemFontOfSize:15];        [self.contentView addSubview:lab];        lab.adjustsFontSizeToFitWidth = YES ;                if ([self.lab.text length]<10) {            self.lab.textAlignment = NSTextAlignmentCenter;        }                self.lab = lab;        self.contentView.backgroundColor = [UIColor whiteColor];                __weak __typeof(self)wSelf = self;        [self.imgView mas_makeConstraints:^(MASConstraintMaker *make) {            __strong __typeof(wSelf)sSelf = wSelf;            make.centerX.equalTo(sSelf.contentView.mas_centerX);            make.centerY.equalTo(sSelf.contentView.mas_centerY);            make.height.equalTo(sSelf.contentView.mas_height).multipliedBy(0.5);            make.width.equalTo(sSelf.contentView.mas_height).multipliedBy(0.5);        }];                [self.lab mas_makeConstraints:^(MASConstraintMaker *make) {            __strong __typeof(wSelf)sSelf = wSelf;            make.centerX.equalTo(sSelf.contentView.mas_centerX);            make.top.equalTo(sSelf.imgView.mas_bottom).offset(kImageToTitleDistance);            make.width.equalTo(sSelf.contentView.mas_width).multipliedBy(0.7);            make.height.mas_equalTo(20);        }];            }        return self;}-(void)layoutSubviews{   // [self layoutIfNeeded];   // [self.lab adjustsFontSizeToFitWidth] ;    }-(void)refreshUIWithModel:(DeviceModel *)model{    if (model != nil) {        //设置内容        NSDictionary *dic = [[fileOperation sharedOperation] getImageNameWithDevice_type:model.dev_type device_mode:1];        UIImage *nor_img = [UIImage imageNamed:dic[@"off"]];        UIImage *sel_img = [UIImage imageNamed:dic[@"on"]];        UIImage *unknow_img = [UIImage imageNamed:@"btn_unkown_status_"];                if (model.status.count != 0) {                        if ([model.status[0][@"params"] isEqualToString:@"AQ=="]) {                            self.imgView.image = sel_img;                        }else            {                self.imgView.image = nor_img;                        }        }else        {            self.imgView.image = unknow_img;        }        self.lab.text = model.name;    }else    {        self.imgView.image = [UIImage imageNamed:@"btn_add_dashboard_nor_"];        [self.imgView mas_makeConstraints:^(MASConstraintMaker *make) {            make.centerX.equalTo(self.contentView.mas_centerX);            make.centerY.equalTo(self.contentView.mas_centerY);            make.height.equalTo(self.contentView.mas_height).multipliedBy(0.3);            make.width.equalTo(self.contentView.mas_height).multipliedBy(0.3);        }];        self.lab.text = nil;    }}@end